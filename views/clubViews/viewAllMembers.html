<% include ../layout/header %>

<div id="topDiv" style="position: fixed; z-index: 9; width: 100%; height: 80%; display: none; color: white; align-self: center; font-size: 20px; overflow-y: scroll;">
</div>
<div class="container">
  <h2>Members of <%= club.name %></h2>
  <p></p>            
  <table class="table">
    <thead>
      <tr>
        	<th style="width: 10%;"></th>
			<th style="width: 30%;">Name</th>
			<th style="width: 20%;">Role</th>
			<th style="width: 20%;">Rating</th>
			<th style="width: 20%;">Review</th>
      </tr>
    </thead>
    <tbody>
      	<% members.forEach(function(member, index) { %>
			<tr>
				<td>#<%= index %></td>
				<td>
				<%= member.name %>
				</td>
				<td>
				<%= member.role %>
				</td>
				<td>
				<%= member.rating %>
				</td>
				<td class="reviewClass" style="text-overflow: ellipsis; max-width: 100px;white-space: nowrap;overflow: hidden;" onclick="viewReview('<%= member.name%>','<%= member.review%>')">
				<%= member.review %>
				</td>
			</tr>
		<% }) %>

    </tbody>
  </table>
</div>

<style type="text/css">
	.reviewClass:hover {
		cursor: pointer;
		color: #18BC9C;
		text-decoration: underline;
	}
</style>

<script type="text/javascript">
	var viewReview = function(name, review) {
		var html = '<div id=\"reviewDiv\" style=\"position: fixed; align-self: center; margin-top: 50px; margin-left: 30%; width: 500px; height: 300px;\">'
			+	'<h3 style=\"color: white;\">Review of '+name+'</h3><hr>'
			+	'<p style=\"width: 100%; height: 80%; color: white;\">'+review+'</p>'
			+	'<div style=\"float: right;\">'
			+	'</div></div>';
		$('#topDiv').html(html);
		$('#backgroundDiv').show();
	    $('#topDiv').show();
	}
	$(document).mouseup(function (e) {
	    var container = $("#reviewDiv");
	    if (!container.is(e.target) 
	        && container.has(e.target).length === 0) {
	        container.hide();
	        $('#backgroundDiv').hide();
	        $('#topDiv').hide();
	    }
	});

	$(document).keyup(function(e) {
	  if (e.keyCode === 27) {
			$('#backgroundDiv').hide();
			$('#topDiv').hide();
	  }
	});
</script>

<% include ../layout/footer %>
